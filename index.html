<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAC Kalkulyator </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --jac-blue: #00608b; --jac-red: #c8102e; --jac-dark: #1d2124;
            --light-bg: #f8fafc;
            --res-orange: #f39c12; --res-brown: #5d4037;
            --res-red: #e74c3c; --res-green: #27ae60; --res-skyblue: #00bfff;
            --header-gradient: linear-gradient(135deg, #003e5a 0%, #00608b 70%, #004e72 100%);
        }
        
        body { font-family: 'Segoe UI', sans-serif; background: #e9ecef; margin: 0; padding: 5px; }
        .container { max-width: 980px; margin: 0 auto; background: white; padding: 15px; border-radius: 12px; overflow: hidden; }
        
        .top-bar { 
            background: var(--header-gradient);
            padding: 12px 20px;
            margin: -15px -15px 5px -15px;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            color: white;
            border-bottom: 3px solid var(--jac-red);
            gap: 10px;
        }
        .brand-name { 
            font-weight: 900; 
            font-size: clamp(20px, 5vw, 28px); 
            letter-spacing: 1.5px; 
            flex-shrink: 0;
        }
        .header-contacts { 
            display: flex; 
            align-items: center; 
            gap: clamp(8px, 2vw, 15px);
            text-align: right;
        }
        .header-text { 
            line-height: 1.3; 
            font-size: clamp(11px, 3vw, 14px); 
            font-weight: 600; 
            white-space: nowrap;
        }
        .contact-link { 
            color: white; text-decoration: none; background: rgba(255,255,255,0.15); 
            width: 35px; height: 35px; border-radius: 10px; display: flex; align-items: center; 
            justify-content: center; border: 1px solid rgba(255,255,255,0.2);
            flex-shrink: 0;
        }

        .lang-wrapper {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 10px;
            padding-right: 5px;
        }
        .lang-bar { display: flex; gap: 5px; }
        .lang-btn { 
            padding: 4px 12px; border: 1px solid #cbd5e0; background: #fff; 
            color: var(--jac-dark); border-radius: 4px; cursor: pointer; font-size: 11px; font-weight: 700; transition: 0.3s;
        }
        .lang-btn.active { background: var(--jac-red); border-color: var(--jac-red); color: white; }
        .lang-btn:hover { background: #f1f5f9; }

        .model-header {
            background: radial-gradient(circle at left, #ffffff 0%, #f1f5f9 100%);
            border-radius: 10px; padding: 10px 20px; margin-bottom: 15px;
            display: flex; align-items: center; gap: 30px; border: 1px solid #e2e8f0;
        }
        .model-header img { width: 45%; max-width: 450px; height: 220px; object-fit: contain; }
        .model-title-box h3 { color: var(--jac-blue); font-size: 28px; font-weight: 900; margin: 0; }

        .car-specs { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; 
            background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #edf2f7; margin-bottom: 20px;
        }
        .spec-item { display: flex; align-items: center; gap: 8px; font-size: 12px; color: #4a5568; border-bottom: 1px solid #f1f5f9; padding-bottom: 4px; }
        .spec-item i { color: var(--jac-blue); width: 16px; text-align: center; }
        .spec-item b { color: var(--jac-dark); font-weight: 700; }

        .inputs-section { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; 
            margin-bottom: 15px; background: var(--light-bg); padding: 10px; border-radius: 10px; border: 1px solid #e2e8f0; 
        }
        .section-title { font-size: 11px; font-weight: 800; color: var(--jac-blue); grid-column: 1 / -1; border-bottom: 1px solid #cbd5e0; padding-bottom: 3px; text-transform: uppercase; margin-bottom: 3px; }
        .field { display: flex; flex-direction: column; }
        .field label { font-size: 9px; font-weight: 800; color: #64748b; margin-bottom: 2px; }
        select, input { padding: 6px 10px; border: 1px solid #cbd5e0; border-radius: 6px; font-size: 13px; width: 100%; box-sizing: border-box; height: 34px; }
        .res-input { background-color: #f1f5f9 !important; font-weight: 700; border: 1.5px solid #cbd5e0; }

        /* JADVAL USTUNLARINI IXCHAMLASHTIRISH */
        .table-header { text-align: center; margin-top: 15px; margin-bottom: 8px; color: var(--jac-blue); font-weight: 800; font-size: 17px; }
        .table-container { overflow-x: auto; border-radius: 10px; max-height: 400px; border: 2px solid var(--jac-blue); }
        table { width: 100%; border-collapse: collapse; table-layout: fixed; } /* Fixed layout kenglikni boshqarish uchun */
        
        th { background: var(--header-gradient); color: white; font-size: 10px; padding: 6px 2px; position: sticky; top: 0; border: 1px solid rgba(255,255,255,0.1); }
        td { text-align: center; font-size: 11px; padding: 5px 2px; border: 1px solid #e2e8f0; white-space: nowrap; }

        /* Ustun kengliklari */
        th:nth-child(1), td:nth-child(1) { width: 35px; } /* № */
        th:nth-child(2), td:nth-child(2) { width: 22%; } /* Asosiy qarz */
        th:nth-child(3), td:nth-child(3) { width: 22%; } /* Foiz to'lovi */
        th:nth-child(4), td:nth-child(4) { width: 22%; } /* Jami to'lov */
        th:nth-child(5), td:nth-child(5) { width: auto; } /* Qoldiq qarz */

        .action-btns { display: flex; justify-content: flex-end; gap: 15px; margin-top: 15px; padding-bottom: 15px; }
        .btn-action { border: none; padding: 10px 25px; border-radius: 6px; cursor: pointer; color: white; font-weight: 700; display: flex; align-items: center; gap: 8px; font-size: 13px; -webkit-appearance: none; }
        .btn-print { background-color: var(--jac-blue); }

        .footer { margin-top: 15px; padding: 10px 0; border-top: 1.5px solid #eee; display: flex; justify-content: space-between; align-items: center; font-size: 11px; }
        .footer-right { display: flex; align-items: center; gap: 15px; }
        .social-icons { display: flex; gap: 10px; font-size: 15px; }
        .social-icons a { color: var(--jac-blue); text-decoration: none; }

        @media print {
            .lang-wrapper, .action-btns { display: none !important; }
            @page { size: A4; margin: 5mm; }
            body { background: white; padding: 0; margin: 0; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            .container { max-width: 100% !important; padding: 0 !important; margin: 0 !important; border: none !important; }
            .top-bar { margin: 0 0 10px 0 !important; padding: 10px 20px !important; }
        }

        @media (max-width: 768px) {
            .car-specs, .inputs-section { grid-template-columns: repeat(2, 1fr); }
            .model-header { flex-direction: column; }
            .model-header img { width: 85%; height: auto; }
            th { font-size: 9px; }
            td { font-size: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-bar">
            <div class="brand-name">JACAUTO</div>
            <div class="header-contacts">
                <div class="header-text">
                    +998 93 273 21 08<br>
                    www.jacauto.uz
                </div>
                <a href="tel:+998932732108" class="contact-link">
                    <i class="fa-solid fa-phone-flip"></i>
                </a>
            </div>
        </div>

        <div class="lang-wrapper">
            <div class="lang-bar">
                <button class="lang-btn active" onclick="setLanguage('uz', event)">UZB</button>
                <button class="lang-btn" onclick="setLanguage('ru', event)">РУС</button>
                <button class="lang-btn" onclick="setLanguage('en', event)">ENG</button>
            </div>
        </div>

        <div class="model-header">
            <img id="carImage" src="" alt="JAC Car">
            <div class="model-title-box"><h3 id="carName">JAC MODEL</h3></div>
        </div>

        <div class="car-specs" id="carSpecs"></div>

        <div class="inputs-section">
            <div class="section-title" id="t-input-title">KIRITISH MA'LUMOTLARI</div>
            <div class="field" style="grid-column: span 2;">
                <label id="t-model-label">Modelni tanlang</label>
                <select id="modelSelect" onchange="updatePrice()">
                    <option value="199080000">JAC M3 VAN</option>
                    <option value="215460000">JAC M3 LUXE</option>
                    <option value="243180000">JAC M4 LUXE</option>
                    <option value="365400000">JAC SUNRAY VAN</option>
                    <option value="396900000">JAC SUNRAY LUXE</option>
                    <option value="225000000">JAC J7 Luxury</option>
                    <option value="280000000">JAC JS6 Luxury</option>
                    <option value="299000000">JAC JS8 Pro</option>
                    <option value="423500000">JAC RF8</option>
                    <option value="314600000">JAC T8</option>
                    <option value="399300000">JAC T9</option>
                    <option value="231840000">JAC X200 (bort)</option>
                    <option value="238560000">JAC X200 (tent)</option>
                    <option value="258720000">JAC X200 (prom.)</option>
                </select>
            </div>
            <div class="field"><label id="t-price-label">Narxi (UZS)</label><input type="text" id="priceDisplay" oninput="formatAndCalculate()"></div>
            <div class="field"><label id="t-downp-label">Boshl. (%)</label><input type="number" id="downP" value="30" oninput="calculate()"></div>
            <div class="field"><label id="t-rate-label">Stavka (%)</label><input type="number" id="rate" value="25" oninput="calculate()"></div>
            <div class="field"><label id="t-term-label">Muddat (oy)</label><input type="number" id="term" value="60" oninput="calculate()"></div>
            <div class="field"><label id="t-insp-label">Sug'urta (%)</label><input type="number" id="insP" value="1" oninput="calculate()"></div>
            <div class="field">
                <label id="t-type-label">Grafik turi</label>
                <select id="paymentType" onchange="calculate()">
                    <option value="annuitet">ANNUITET</option>
                    <option value="differential">DIFFERENSIAL</option>
                </select>
            </div>

            <div class="section-title" id="t-result-title">NATIJALAR</div>
            <div class="field"><label id="t-loan-label">Kredit summasi</label><input type="text" id="loanInp" class="res-input" readonly></div>
            <div class="field"><label id="t-downsum-label">Boshlang'ich to'lov</label><input type="text" id="downSumInp" class="res-input" readonly style="color:var(--res-orange)"></div>
            <div class="field"><label id="t-inssum-label">Sug'urta to'lovi</label><input type="text" id="insSumInp" class="res-input" readonly style="color:var(--res-brown)"></div>
            <div class="field"><label id="t-totalinit-label">Jami boshl. xarajat</label><input type="text" id="totalInitInp" class="res-input" readonly style="color:var(--res-red)"></div>
            <div class="field"><label id="t-monthly-label">Oylik to'lov</label><input type="text" id="monthlyInp" class="res-input" readonly style="color:var(--res-green)"></div>
            <div class="field"><label id="t-daily-label">Kunlik to'lov</label><input type="text" id="dailyInp" class="res-input" readonly style="color:var(--res-skyblue)"></div>
        </div>

        <div class="table-header" id="t-table-header"><i class="fa-solid fa-calendar-days"></i> TO'LOV JADVALI</div>
        <div class="table-container">
            <table>
                <thead><tr id="t-table-head"><th>№</th><th>Asosiy qarz</th><th>Foiz to'lovi</th><th>Jami to'lov</th><th>Qoldiq qarz</th></tr></thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>

        <div class="action-btns">
            <button class="btn-action btn-print" onclick="handlePrint()" id="t-btn-print"><i class="fa-solid fa-print"></i> CHOP ETISH</button>
        </div>

        <div class="footer">
            <div>© 2026 <b>JACAUTO</b></div>
            <div class="footer-right">
                <span id="t-creator">Creator: <b>Nematovich</b></span>
                <div class="social-icons">
                    <a href="https://t.me/rasul_2108" target="_blank"><i class="fa-brands fa-telegram"></i></a>
                    <a href="https://www.instagram.com/rasul_jacauto/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'uz';

        const translations = {
            uz: {
                inputTitle: "KIRITISH MA'LUMOTLARI", modelLabel: "Modelni tanlang", priceLabel: "Narxi (UZS)", 
                downpLabel: "Boshlang'ich to'lov (%)", rateLabel: "Yillik foiz (%)", termLabel: "Muddat (oy)", inspLabel: "Sug'urta (%)",
                typeLabel: "Grafik turi", resultTitle: "NATIJALAR", loanLabel: "Kredit summasi", downsumLabel: "Boshlang'ich to'lov summasi",
                inssumLabel: "Sug'urta summasi", totalinitLabel: "Jami boshlang'ich xarajat", monthlyLabel: "Oylik to'lov", 
                dailyLabel: "Kunlik to'lov", tableHeader: "TO'LOV JADVALI", tableHead: ["№", "Asosiy qarz", "Foiz to'lovi", "Jami to'lov", "Qoldiq qarz"],
                btnPrint: "CHOP ETISH", creator: "Creator: <b>Nematovich</b>",
                specs: { turi: "Turi", yili: "Yili", urin: "O'rin soni", u_vazn: "Umumiy vazn", y_vazn: "Yuksiz vazn", motor: "Motor", trans: "Transmissiya", ot: "Ot kuchi", tezlik: "Maks. tezlik", sarf: "Yoqilg'i sarfi", bak: "Bak sig'imi", olcham: "O'lchamlari", clearance: "Klirens", shina: "Shina o'lchami", drive: "G'ildirak (Drive)", tormoz: "Tormoz turi" },
                vals: { furgon: "Furgon", miniven: "Miniven", mikro: "Mikroavtobus", sedan: "Sedan", krossover: "Krossover", pikap: "Pikap", mini_y: "Mini-yuktashuvchi", disk_b: "Disk/Baraban", disk: "Disk", bort: "Bort", tent: "Tent", prom: "Prom." }
            },
            ru: {
                inputTitle: "ВХОДНЫЕ ДАННЫЕ", modelLabel: "Выберите модель", priceLabel: "Цена (UZS)", 
                downpLabel: "Первон. (%)", rateLabel: "Ставка (%)", termLabel: "Срок (мес)", inspLabel: "Страховка (%)",
                typeLabel: "Тип графика", resultTitle: "РЕЗУЛЬТАТЫ", loanLabel: "Сумма кредита", downsumLabel: "Первоначальный взнос",
                inssumLabel: "Сумма страховки", totalinitLabel: "Итого первон. расход", monthlyLabel: "Ежемесячный платеж", 
                dailyLabel: "Платеж в день", tableHeader: "ГРАФИК ПЛАТЕЖЕЙ", tableHead: ["№", "Осн. долг", "Проценты", "Всего", "Остаток"],
                btnPrint: "ПЕЧАТЬ", creator: "Создатель: <b>Nematovich</b>",
                specs: { turi: "Тип", yili: "Год", urin: "Мест", u_vazn: "Общий вес", y_vazn: "Вес без нагрузки", motor: "Мотор", trans: "Трансмиссия", ot: "Лошадиные силы", tezlik: "Макс. скорость", sarf: "Расход топлива", bak: "Объем бака", olcham: "Габариты", clearance: "Клиренс", shina: "Размер шин", drive: "Привод", tormoz: "Тип тормозов" },
                vals: { furgon: "Фургон", miniven: "Минивэн", mikro: "Микроавтобус", sedan: "Седан", krossover: "Кроссовер", pikap: "Пикап", mini_y: "Мини-грузовик", disk_b: "Диск/Барабан", disk: "Диск", bort: "Борт", tent: "Тент", prom: "Пром." }
            },
            en: {
                inputTitle: "INPUT DATA", modelLabel: "Select Model", priceLabel: "Price (UZS)", 
                downpLabel: "Down Pay (%)", rateLabel: "Rate (%)", termLabel: "Term (month)", inspLabel: "Insurance (%)",
                typeLabel: "Payment Type", resultTitle: "RESULTS", loanLabel: "Loan Amount", downsumLabel: "Down Payment",
                inssumLabel: "Insurance Amount", totalinitLabel: "Total Initial Cost", monthlyLabel: "Monthly Payment", 
                dailyLabel: "Daily Payment", tableHeader: "PAYMENT SCHEDULE", tableHead: ["№", "Principal", "Interest", "Total", "Balance"],
                btnPrint: "PRINT", creator: "Creator: <b>Nematovich</b>",
                specs: { turi: "Type", yili: "Year", urin: "Seats", u_vazn: "Gross Weight", y_vazn: "Curb Weight", motor: "Engine", trans: "Transmission", ot: "Horsepower", tezlik: "Max Speed", sarf: "Fuel Consumption", bak: "Fuel Tank", olcham: "Dimensions", clearance: "Clearance", shina: "Tire Size", drive: "Drive", tormoz: "Brake Type" },
                vals: { furgon: "Van", miniven: "Minivan", mikro: "Minibus", sedan: "Sedan", krossover: "Crossover", pikap: "Pickup", mini_y: "Mini Truck", disk_b: "Disc/Drum", disk: "Disc", bort: "Board", tent: "Tent", prom: "Prom." }
            }
        };

        const carData = {
            "199080000": { name: "JAC M3 VAN", img: "https://lh3.googleusercontent.com/u/0/d/1jQ2PiyDQbPkNPdnWGKq0RaHiskG_MVQF", turi: "furgon", yili: "2026", urin: "2", motor: "1.8", trans: "5MT", ot: "134", tezlik: "<155 km/s", sarf: "<8.5 L", bak: "55 L", olcham: "5115x1765x1900", clearance: "16 cm", shina: "195/70R15", drive: "RWD", tormoz: "disk_b", u_vazn: "2600 kg", y_vazn: "1600 kg" },
            "215460000": { name: "JAC M3 LUXE", img: "https://lh3.googleusercontent.com/u/0/d/1tcorTc9GXb6QjEAVZXI5yDuKPF9zmWUE", turi: "miniven", yili: "2026", urin: "9", motor: "1.8", trans: "5MT", ot: "134", tezlik: "<155 km/s", sarf: "<8.5 L", bak: "55 L", olcham: "5115x1765x1900", clearance: "16 cm", shina: "205/65R15", drive: "RWD", tormoz: "disk_b", u_vazn: "2378 kg", y_vazn: "1640 kg" },
            "243180000": { name: "JAC M4 LUXE", img: "https://lh3.googleusercontent.com/u/0/d/15dyytkijgdvGLnZ9iNwcObH9CgFmewRC", turi: "miniven", yili: "2026", urin: "9", motor: "2.0", trans: "5MT", ot: "144", tezlik: "<160 km/s", sarf: "<9.5 L", bak: "80 L", olcham: "5200x1890x1970", clearance: "16 cm", shina: "215/65R16", drive: "RWD", tormoz: "disk", u_vazn: "2815 kg", y_vazn: "1930 kg" },
            "365400000": { name: "JAC SUNRAY VAN", img: "https://lh3.googleusercontent.com/u/0/d/1MujyvVuC9wrZVyWEURZx50J9fy3K8pwC", turi: "furgon", yili: "2026", urin: "3", motor: "2.0", trans: "6MT", ot: "191", tezlik: "<120 km/s", sarf: "<8.5 L", bak: "80 L", olcham: "5990x2098x2645", clearance: "16 cm", shina: "195/75R16", drive: "RWD", tormoz: "disk_b", u_vazn: "3490 kg", y_vazn: "2655 kg" },
            "396900000": { name: "JAC SUNRAY LUXE", img: "https://lh3.googleusercontent.com/u/0/d/1z4iiyDloyrw-qWydz8EIbftCTogBrjve", turi: "mikro", yili: "2026", urin: "16", motor: "2.0", trans: "6MT", ot: "190", tezlik: "<120 km/s", sarf: "<8.5 L", bak: "80 L", olcham: "5990x2098x2645", clearance: "16 cm", shina: "215/75R16", drive: "RWD", tormoz: "disk", u_vazn: "4000 kg", y_vazn: "2800 kg" },
            "225000000": { name: "JAC J7 Luxury", img: "https://lh3.googleusercontent.com/u/0/d/1KXCElvMx0nRr3u682smce-0YH3mlTdlQ", turi: "sedan", yili: "2024", urin: "5", motor: "1.5T", trans: "6CVT", ot: "150", tezlik: "170 km/s", sarf: "<6.5 L", bak: "55 L", olcham: "4772x1820x1492", clearance: "12 cm", shina: "215/50R17", drive: "FWD", tormoz: "disk", u_vazn: "1865 kg", y_vazn: "1440 kg" },
            "280000000": { name: "JAC JS6 Luxury", img: "https://lh3.googleusercontent.com/u/0/d/11HkhrgA0RoW2ByI30UpGgPhLyuWH53wf", turi: "krossover", yili: "2024", urin: "5", motor: "1.5T", trans: "6DCT", ot: "180", tezlik: "180 km/s", sarf: "<6.9 L", bak: "55 L", olcham: "4605x1890x1700", clearance: "25 cm", shina: "235/55R18", drive: "FWD", tormoz: "disk", u_vazn: "2015 kg", y_vazn: "1590 kg" },
            "299000000": { name: "JAC JS8 Pro", img: "https://lh3.googleusercontent.com/u/0/d/1q3Z5_r-1bahFOVtsuYz6Y8U8lrvCkFyB", turi: "krossover", yili: "2026", urin: "7", motor: "1.5T", trans: "7DCT", ot: "180", tezlik: "170 km/s", sarf: "<7.5 L", bak: "58 L", olcham: "4825x1870x1758", clearance: "16 cm", shina: "265/50R19", drive: "FWD", tormoz: "disk", u_vazn: "2225 kg", y_vazn: "1675 kg" },
            "423500000": { name: "JAC RF8", img: "https://lh3.googleusercontent.com/u/0/d/1CCY8i1AkEskRpft3bo0hjnC7fG5pnnNC", turi: "miniven", yili: "2026", urin: "7", motor: "2.0T", trans: "8GDI", ot: "253", tezlik: "210 km/s", sarf: "<8.9 L", bak: "65 L", olcham: "5215x1895x1830", clearance: "16 cm", shina: "225/55R18", drive: "FWD", tormoz: "disk", u_vazn: "2110 kg", y_vazn: "2675 kg" },
            "314600000": { name: "JAC T8", img: "https://lh3.googleusercontent.com/u/0/d/1HUiquLb4Gg0y4NbmdZu4msPdLOrzI-ZL", turi: "pikap", yili: "2026", urin: "5", motor: "2.0T", trans: "6MT", ot: "191", tezlik: "120 km/s", sarf: "<8.5 L", bak: "80 L", olcham: "5990x2098x2645", clearance: "16 cm", shina: "195/75R16", drive: "4WD", tormoz: "disk_b", u_vazn: "4000 kg", y_vazn: "2800 kg" },
            "399300000": { name: "JAC T9", img: "https://lh3.googleusercontent.com/u/0/d/1KRd0ttwyvL8DCOzAhFNET-9-UjFfotrP", turi: "pikap", yili: "2026", urin: "5", motor: "2.0T", trans: "8AT", ot: "231", tezlik: "150 km/s", sarf: "<10 L", bak: "76 L", olcham: "5330x1965x1920", clearance: "21 cm", shina: "265/60R18", drive: "4WD", tormoz: "disk", u_vazn: "3055 kg", y_vazn: "2055 kg" },
            "231840000": { name: "JAC X200 (bort)", img: "https://lh3.googleusercontent.com/u/0/d/1F_UaGTQCj2pbLJBpM-rZEynO0-fZ0xHb", turi: "mini_y", yili: "2025", urin: "2", motor: "2.0", trans: "5MT", ot: "147", tezlik: "110 km/s", sarf: "<8.2 L", bak: "65 L", olcham: "5190×1750×1945", clearance: "18 cm", shina: "195/70R15C", drive: "RWD", tormoz: "disk_b", u_vazn: "3490 kg", y_vazn: "1645 kg", variant: "bort" },
            "238560000": { name: "JAC X200 (tent)", img: "https://lh3.googleusercontent.com/u/0/d/1F_UaGTQCj2pbLJBpM-rZEynO0-fZ0xHb", turi: "mini_y", yili: "2025", urin: "2", motor: "2.0", trans: "5MT", ot: "147", tezlik: "110 km/s", sarf: "<8.2 L", bak: "65 L", olcham: "5190×1750×2640", clearance: "18 cm", shina: "195/70R15C", drive: "RWD", tormoz: "disk_b", u_vazn: "3500 kg", y_vazn: "1775 kg", variant: "tent" },
            "258720000": { name: "JAC X200 (prom.)", img: "https://lh3.googleusercontent.com/u/0/d/1F_UaGTQCj2pbLJBpM-rZEynO0-fZ0xHb", turi: "mini_y", yili: "2025", urin: "2", motor: "2.0", trans: "5MT", ot: "147", tezlik: "110 km/s", sarf: "<8.2 L", bak: "65 L", olcham: "5190×1760×2610", clearance: "18 cm", shina: "195/70R15C", drive: "RWD", tormoz: "disk_b", u_vazn: "3500 kg", y_vazn: "1780 kg", variant: "prom" }
        };

        function formatNumber(n) { return n.toLocaleString('en-US'); }

        function setLanguage(lang, event) {
            currentLang = lang;
            if(event) {
                document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            }
            const t = translations[lang];
            document.getElementById('t-input-title').innerText = t.inputTitle;
            document.getElementById('t-model-label').innerText = t.modelLabel;
            document.getElementById('t-price-label').innerText = t.priceLabel;
            document.getElementById('t-downp-label').innerText = t.downpLabel;
            document.getElementById('t-rate-label').innerText = t.rateLabel;
            document.getElementById('t-term-label').innerText = t.termLabel;
            document.getElementById('t-insp-label').innerText = t.inspLabel;
            document.getElementById('t-type-label').innerText = t.typeLabel;
            document.getElementById('t-result-title').innerText = t.resultTitle;
            document.getElementById('t-loan-label').innerText = t.loanLabel;
            document.getElementById('t-downsum-label').innerText = t.downsumLabel;
            document.getElementById('t-inssum-label').innerText = t.inssumLabel;
            document.getElementById('t-totalinit-label').innerText = t.totalinitLabel;
            document.getElementById('t-monthly-label').innerText = t.monthlyLabel;
            document.getElementById('t-daily-label').innerText = t.dailyLabel;
            document.getElementById('t-table-header').innerHTML = `<i class="fa-solid fa-calendar-days"></i> ${t.tableHeader}`;
            document.getElementById('t-btn-print').innerHTML = `<i class="fa-solid fa-print"></i> ${t.btnPrint}`;
            document.getElementById('t-creator').innerHTML = t.creator;

            let h = ""; t.tableHead.forEach(txt => h += `<th>${txt}</th>`);
            document.getElementById('t-table-head').innerHTML = h;

            updatePrice();
        }

        function updatePrice() {
            const id = document.getElementById('modelSelect').value;
            const car = carData[id];
            const t = translations[currentLang];
            const s = t.specs;
            const v = t.vals;
            
            document.getElementById('carImage').src = car.img;
            document.getElementById('priceDisplay').value = formatNumber(parseInt(id));
            
            let displayName = car.name;
            if(car.variant) {
                const baseName = car.name.split(' (')[0];
                displayName = `${baseName} (${v[car.variant]})`;
            }
            document.getElementById('carName').innerText = displayName;
            
            document.getElementById('carSpecs').innerHTML = `
                <div class="spec-item"><i class="fa-solid fa-car"></i> <span>${s.turi}: <b>${v[car.turi]}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-calendar"></i> <span>${s.yili}: <b>${car.yili}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-users"></i> <span>${s.urin}: <b>${car.urin}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-weight-scale"></i> <span>${s.u_vazn}: <b>${car.u_vazn}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-weight-hanging"></i> <span>${s.y_vazn}: <b>${car.y_vazn}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-microchip"></i> <span>${s.motor}: <b>${car.motor}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-gears"></i> <span>${s.trans}: <b>${car.trans}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-bolt"></i> <span>${s.ot}: <b>${car.ot}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-gauge-high"></i> <span>${s.tezlik}: <b>${car.tezlik}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-gas-pump"></i> <span>${s.sarf}: <b>${car.sarf}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-oil-can"></i> <span>${s.bak}: <b>${car.bak}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-ruler-combined"></i> <span>${s.olcham}: <b>${car.olcham}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-arrows-up-down"></i> <span>${s.clearance}: <b>${car.clearance}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-dharmachakra"></i> <span>${s.shina}: <b>${car.shina}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-truck-monster"></i> <span>${s.drive}: <b>${car.drive}</b></span></div>
                <div class="spec-item"><i class="fa-solid fa-circle-stop"></i> <span>${s.tormoz}: <b>${v[car.tormoz]}</b></span></div>
            `;
            calculate();
        }

        function calculate() {
            let priceStr = document.getElementById('priceDisplay').value.replace(/,/g, "");
            const price = parseFloat(priceStr) || 0;
            const downPercent = parseFloat(document.getElementById('downP').value) || 0;
            const annualRate = parseFloat(document.getElementById('rate').value) || 0;
            const months = parseInt(document.getElementById('term').value) || 1;
            const insPercent = parseFloat(document.getElementById('insP').value) || 0;
            const paymentType = document.getElementById('paymentType').value;

            const downSum = price * (downPercent / 100);
            const loanAmount = price - downSum;
            const insSum = loanAmount * (insPercent / 100) * (months / 12);
            const mRate = (annualRate / 100) / 12;

            let bal = loanAmount; let rows = "";
            if (paymentType === 'annuitet') {
                let monthly = mRate > 0 ? loanAmount * (mRate * Math.pow(1 + mRate, months)) / (Math.pow(1 + mRate, months) - 1) : loanAmount / months;
                document.getElementById('monthlyInp').value = formatNumber(Math.round(monthly));
                document.getElementById('dailyInp').value = formatNumber(Math.round(monthly/30));
                for (let i = 1; i <= months; i++) {
                    let int = bal * mRate; let prin = monthly - int; bal -= prin;
                    rows += `<tr><td>${i}</td><td>${formatNumber(Math.round(prin))}</td><td>${formatNumber(Math.round(int))}</td><td>${formatNumber(Math.round(monthly))}</td><td>${formatNumber(Math.round(Math.max(0, bal)))}</td></tr>`;
                }
            } else {
                const principal = loanAmount / months;
                let firstM = 0;
                for (let i = 1; i <= months; i++) {
                    let int = bal * mRate; let currentM = principal + int;
                    if (i === 1) firstM = currentM;
                    bal -= principal;
                    rows += `<tr><td>${i}</td><td>${formatNumber(Math.round(principal))}</td><td>${formatNumber(Math.round(int))}</td><td>${formatNumber(Math.round(currentM))}</td><td>${formatNumber(Math.round(Math.max(0, bal)))}</td></tr>`;
                }
                document.getElementById('monthlyInp').value = formatNumber(Math.round(firstM));
                document.getElementById('dailyInp').value = formatNumber(Math.round(firstM/30));
            }
            document.getElementById('loanInp').value = formatNumber(Math.round(loanAmount));
            document.getElementById('downSumInp').value = formatNumber(Math.round(downSum));
            document.getElementById('insSumInp').value = formatNumber(Math.round(insSum));
            document.getElementById('totalInitInp').value = formatNumber(Math.round(downSum + insSum));
            document.getElementById('tableBody').innerHTML = rows;
        }

        function formatAndCalculate() {
            let input = document.getElementById('priceDisplay');
            let value = input.value.replace(/\D/g, "");
            if (value !== "") { input.value = formatNumber(parseInt(value)); }
            calculate();
        }

        function handlePrint() {
            if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                setTimeout(() => {
                    window.print();
                }, 300);
            } else {
                window.print();
            }
        }
        
        window.onload = function() {
            setLanguage('uz', null);
        };
    </script>
</body>
</html>
